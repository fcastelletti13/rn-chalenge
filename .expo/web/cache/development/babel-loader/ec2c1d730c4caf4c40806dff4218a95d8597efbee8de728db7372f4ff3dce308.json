{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState } from 'react';\nimport { NavigationContainer } from '@react-navigation/native';\nimport { createStackNavigator } from '@react-navigation/stack';\nimport { AppProvider, useAppContext } from \"./src/context/AppContext.js\";\nimport axios from \"./src/apiaxiosConfig\";\nimport LoginForm from \"./LoginForm\";\nimport HomeScreen from \"./HomeScreen\";\nimport MenuScreen from \"./MenuScreen\";\nimport OrderScreen from \"./OrderScreen\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar Stack = createStackNavigator();\nvar App = function App() {\n  var _useAppContext = useAppContext(),\n    user = _useAppContext.user,\n    setUser = _useAppContext.setUser;\n  var _useState = useState(true),\n    _useState2 = _slicedToArray(_useState, 2),\n    isLoading = _useState2[0],\n    setIsLoading = _useState2[1];\n  useEffect(function () {\n    var _ref;\n    var checkAuthentication = function checkAuthentication() {\n      return (_ref = _ref || _asyncToGenerator(function* () {\n        try {\n          var token = '';\n          if (token) {\n            var response = yield axios.get('/user-info', {\n              headers: {\n                Authorization: `Bearer ${token}`\n              }\n            });\n            setUser(response.data);\n          }\n        } catch (error) {\n          console.error('Error al verificar la autenticación:', error);\n        } finally {\n          setIsLoading(false);\n        }\n      })).apply(this, arguments);\n    };\n    checkAuthentication();\n  }, [setUser]);\n  if (isLoading) {\n    return null;\n  }\n  return _jsx(NavigationContainer, {\n    children: _jsx(Stack.Navigator, {\n      initialRouteName: \"Login\",\n      children: !user ? _jsx(Stack.Screen, {\n        name: \"Login\",\n        component: LoginForm,\n        options: {\n          headerShown: false\n        }\n      }) : _jsxs(_Fragment, {\n        children: [_jsx(Stack.Screen, {\n          name: \"Home\",\n          component: HomeScreen\n        }), _jsx(Stack.Screen, {\n          name: \"Menu\",\n          component: MenuScreen\n        }), _jsx(Stack.Screen, {\n          name: \"Order\",\n          component: OrderScreen\n        })]\n      })\n    })\n  });\n};\nexport default (function () {\n  return _jsx(AppProvider, {\n    children: _jsx(App, {})\n  });\n});","map":{"version":3,"names":["React","useEffect","useState","NavigationContainer","createStackNavigator","AppProvider","useAppContext","axios","LoginForm","HomeScreen","MenuScreen","OrderScreen","Stack","App","user","setUser","isLoading","setIsLoading","checkAuthentication","token","response","get","headers","Authorization","data","error","console","headerShown"],"sources":["C:/Users/devandroid/Desktop/app-platos/App.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { NavigationContainer } from '@react-navigation/native';\nimport { createStackNavigator } from '@react-navigation/stack';\nimport { AppProvider, useAppContext } from './src/context/AppContext.js';\nimport axios from './src/apiaxiosConfig';\nimport LoginForm from './LoginForm';\nimport HomeScreen from './HomeScreen';\nimport MenuScreen from './MenuScreen';\nimport OrderScreen from './OrderScreen';\n\nconst Stack = createStackNavigator();\n\nconst App = () => {\n  const { user, setUser } = useAppContext();\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    // Verificar si hay un token de usuario almacenado en AsyncStorage u otro lugar\n    // y establecer el usuario en el contexto si está autenticado.\n    const checkAuthentication = async () => {\n      try {\n        const token = ''; // Obtén el token almacenado\n        if (token) {\n          // Si hay un token, realiza una solicitud para obtener información del usuario\n          const response = await axios.get('/user-info', {\n            headers: { Authorization: `Bearer ${token}` },\n          });\n          setUser(response.data);\n        }\n      } catch (error) {\n        console.error('Error al verificar la autenticación:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    checkAuthentication();\n  }, [setUser]);\n\n  if (isLoading) {\n    return null; // Muestra una pantalla de carga mientras se verifica la autenticación\n  }\n\n  return (\n    <NavigationContainer>\n      <Stack.Navigator initialRouteName=\"Login\">\n        {!user ? (\n          <Stack.Screen name=\"Login\" component={LoginForm} options={{ headerShown: false }} />\n        ) : (\n          <>\n            <Stack.Screen name=\"Home\" component={HomeScreen} />\n            <Stack.Screen name=\"Menu\" component={MenuScreen} />\n            <Stack.Screen name=\"Order\" component={OrderScreen} />\n          </>\n        )}\n      </Stack.Navigator>\n    </NavigationContainer>\n  );\n};\n\nexport default () => {\n  return (\n    <AppProvider>\n      <App />\n    </AppProvider>\n  );\n};\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,mBAAmB,QAAQ,0BAA0B;AAC9D,SAASC,oBAAoB,QAAQ,yBAAyB;AAC9D,SAASC,WAAW,EAAEC,aAAa;AACnC,OAAOC,KAAK;AACZ,OAAOC,SAAS;AAChB,OAAOC,UAAU;AACjB,OAAOC,UAAU;AACjB,OAAOC,WAAW;AAAsB;AAAA;AAAA;AAExC,IAAMC,KAAK,GAAGR,oBAAoB,EAAE;AAEpC,IAAMS,GAAG,GAAG,SAANA,GAAG,GAAS;EAChB,qBAA0BP,aAAa,EAAE;IAAjCQ,IAAI,kBAAJA,IAAI;IAAEC,OAAO,kBAAPA,OAAO;EACrB,gBAAkCb,QAAQ,CAAC,IAAI,CAAC;IAAA;IAAzCc,SAAS;IAAEC,YAAY;EAE9BhB,SAAS,CAAC,YAAM;IAAA;IAGd,IAAMiB,mBAAmB,YAAnBA,mBAAmB;MAAA,yCAAG,aAAY;QACtC,IAAI;UACF,IAAMC,KAAK,GAAG,EAAE;UAChB,IAAIA,KAAK,EAAE;YAET,IAAMC,QAAQ,SAASb,KAAK,CAACc,GAAG,CAAC,YAAY,EAAE;cAC7CC,OAAO,EAAE;gBAAEC,aAAa,EAAG,UAASJ,KAAM;cAAE;YAC9C,CAAC,CAAC;YACFJ,OAAO,CAACK,QAAQ,CAACI,IAAI,CAAC;UACxB;QACF,CAAC,CAAC,OAAOC,KAAK,EAAE;UACdC,OAAO,CAACD,KAAK,CAAC,sCAAsC,EAAEA,KAAK,CAAC;QAC9D,CAAC,SAAS;UACRR,YAAY,CAAC,KAAK,CAAC;QACrB;MACF,CAAC;IAAA;IAEDC,mBAAmB,EAAE;EACvB,CAAC,EAAE,CAACH,OAAO,CAAC,CAAC;EAEb,IAAIC,SAAS,EAAE;IACb,OAAO,IAAI;EACb;EAEA,OACE,KAAC,mBAAmB;IAAA,UAClB,KAAC,KAAK,CAAC,SAAS;MAAC,gBAAgB,EAAC,OAAO;MAAA,UACtC,CAACF,IAAI,GACJ,KAAC,KAAK,CAAC,MAAM;QAAC,IAAI,EAAC,OAAO;QAAC,SAAS,EAAEN,SAAU;QAAC,OAAO,EAAE;UAAEmB,WAAW,EAAE;QAAM;MAAE,EAAG,GAEpF;QAAA,WACE,KAAC,KAAK,CAAC,MAAM;UAAC,IAAI,EAAC,MAAM;UAAC,SAAS,EAAElB;QAAW,EAAG,EACnD,KAAC,KAAK,CAAC,MAAM;UAAC,IAAI,EAAC,MAAM;UAAC,SAAS,EAAEC;QAAW,EAAG,EACnD,KAAC,KAAK,CAAC,MAAM;UAAC,IAAI,EAAC,OAAO;UAAC,SAAS,EAAEC;QAAY,EAAG;MAAA;IAExD;EACe,EACE;AAE1B,CAAC;AAED,gBAAe,YAAM;EACnB,OACE,KAAC,WAAW;IAAA,UACV,KAAC,GAAG;EAAG,EACK;AAElB,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}